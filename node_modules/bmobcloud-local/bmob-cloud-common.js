var model = {}

var Bmob = model.Bmob = require("bmob").Bmob;

var __Request = model.Request = function (route, table, objectId, method, params, callback) {
//        Bmob._arrayEach(["__type", "className"],
//            function(key) { delete json[key]; });

    Bmob._request(route, table, objectId, method, params)
        .then(function (response) {
            return JSON.stringify(response);
        })
        ._thenRunCallbacks({
            success: function (results) {
                callback && callback(null, results);
            },
            error: function (error) {
                callback && callback(JSON.stringify(error), null);
            }
        }
    );

}

module.exports = model;
