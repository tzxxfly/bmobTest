//数组操作对象

var __Request = require("./../bmob-cloud-common").Request;
var assert = require("assert");

module.exports = (function () {
    var model = {};

    /**
     添加数组对象
     添加数组对象,不管元素是否存在都添加的实现代码如下：

     arr.add({
     "table":"GameScore",
     "data":{"skills":{"__op":"Add","objects":["flying","kungfu"]}}
     },function(err,data){
     //回调函数
     });

     */
    model.add = function (request, callback) {
        assert.ifError(request.table == null);

        __Request("classes", request.table, request.objectId, request.objectId == null ? 'POST' : 'PUT', request.data, callback);
    }

    /**
     添加数组对象,只有在元素不存在情况下才添加的实现代码如下：

     //往GameScore表中字段skills添加的数组
     arr.addUnique({
     "table":"GameScore",
     "objectId":"j4w2DDDT",
     "data":{"skills":{"__op":"AddUnique","objects":["flying","kungfu"]}}
     },function(err,data){
     //回调函数
     });
     */
    model.addUnique = function (request, callback) {
        assert.ifError(request.table == null);
        assert.ifError(request.objectId == null);

        __Request("classes", request.table, request.objectId, 'PUT', request.data, callback);
    }

    /**
     删除数组对象
     //往GameScore表中字段skills删除数组
     arr.remove({
     "table":"GameScore",
     "objectId":"j4w2DDDT",
     "data":{"skills":{"__op":"Remove","objects":["flying","kungfu"]}}
     },function(err,data){
     //回调函数
     });
     */
    model.remove = function (request, callback) {
        assert.ifError(request.table == null);
        assert.ifError(request.objectId == null);

        __Request("classes", request.table, request.objectId, 'PUT', request.data, callback);
    }

    /**
     查询数组对象,可以查找skills的数组值中包含有"flying"的对象的实现方法如下:

     //往GameScore表中字段skills添加的数组
     arr.query({
     "table":"GameScore",
     "where":{"skills":"flying"}
     },function(err,data){
     //回调函数
     });
     查询数组对象,可以查找skills的数组值中包含有"flying","kungfu"的对象的实现方法如下：

     //往GameScore表中字段skills添加的数组
     arr.query({
     "table":"GameScore",
     "where":{"skills":{"$all":["flying","kungfu"]}}
     },function(err,data){
     //回调函数
     });
     */
    model.query = function (request, callback) {
        assert.ifError(request.table == null);

        __Request("classes", request.table, request.objectId, 'GET', request, callback);
    }

    return model;
})();